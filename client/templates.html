<template name="navigation">
	<h1><a href="{{ pathFor 'browse' page=1 }}">eboydb</a>: {{ postsCount }} docs â€“ p{{ currentPage }}/{{ totalPages }}</h1>
	<input type="file" name="myFile" class="myPixInput">
</template>


<template name="browse">
	{{> navigation }}
	<div class="paging">
		<span class="previous">previous</span> | 
		<span class="next">next</span>
	</div>
	<div class="container">
		{{#each showPix}}

			<div class="docbox" style="background-color: {{ this.backColor }}">
				<div class="docinfo"><span class='remove'>X</span> {{ this.backColor }} {{ toWidth }}px {{ factor }}x</div>
				<figure>
					<a href="{{ pathFor 'doc' }}"><img src="{{ this.url store='OriginalPix' }}" width="{{ toWidth }}" /></a>
				</figure>
			</div>

		{{/each}}
	</div>
</template>

<template name="doc">
	<h1><a href="" class="goBack">eboydb</a>: {{ this._id }} </h1>
	<div class="showDocFull">
		<figure>
			<img style="background-color: {{ this.backColor }}" src="{{ this.url store='OriginalRetinaPix' }}" width="{{ this.metadata.width }}" height="{{ this.metadata.height }}" />
			<figcaption>
				<div>name: {{ this.name }}</div>
				<div>uploadedAt: {{this.uploadedAt}}</div>
				<div>metadata.width: {{this.metadata.width}}, metadata.height: {{this.metadata.height}}</div>
				<div>metadata.copyright: {{this.metadata.copyright}}</div>
				<div>tags: {{this.tags}}</div>
				<div>background-color: {{ this.backColor }}</div>
			</figcaption>
		</figure>
		<form>
			<div>tags: <input type="text" name="tags" value="{{this.tags}}"></div>
			<div>background-color: <input type="text" name="backColor" value="{{this.backColor}}"></div>
			<input type="submit" name="updatetags">
		</form>
	</div>
</template>

<!-- //////////////////////////////////// TESTS -->
<template name="tester">
	<img id="scream" src="{{ this.url store='OriginalRetinaPix' }}" width="{{ this.metadata.width }}" height="{{ this.metadata.height }}" />
	<div>name: {{ this.name }}</div>
		<canvas id="myCanvas" width="864" height="864" style="border:1px solid #c3c3c3; width: 432px; height:432px">
			Your browser does not support the HTML5 
		</canvas>
	<script>
		var myImage = new Image();
		myImage.onload = function() {
			var c=document.getElementById("myCanvas");
			var ctx=c.getContext("2d");
			ctx.fillStyle = "{{ this.backColor }}";
			ctx.fillRect(0, 0, 864, 864);
			ctx.imageSmoothingEnabled= false;
			ctx.drawImage(myImage, 0, 0, 864, 864);
		}
		myImage.src="{{ this.url store='OriginalRetinaPix' }}";
	</script>
</template>